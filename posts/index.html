<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title>Lewis Metcalf</title>
<meta name=viewport content="width=device-width,minimum-scale=1">
<meta name=description content>
<meta name=generator content="Hugo 0.91.2">
<meta name=robots content="noindex, nofollow">
<link rel=stylesheet href=/ananke/css/main.min.css>
<link href=/posts/index.xml rel=alternate type=application/rss+xml title="Lewis Metcalf">
<link href=/posts/index.xml rel=feed type=application/rss+xml title="Lewis Metcalf">
<meta property="og:title" content="Posts">
<meta property="og:description" content>
<meta property="og:type" content="website">
<meta property="og:url" content="https://LeweyM.github.io/posts/">
<meta itemprop=name content="Posts">
<meta itemprop=description content><meta name=twitter:card content="summary">
<meta name=twitter:title content="Posts">
<meta name=twitter:description content>
</head>
<body class="ma0 avenir bg-near-white">
<header>
<div class="pb3-m pb6-l bg-black">
<nav class="pv3 ph3 ph4-ns" role=navigation>
<div class="flex-l justify-between items-center center">
<a href=/ class="f3 fw2 hover-white no-underline white-90 dib">
Lewis Metcalf
</a>
<div class="flex-l items-center">
<div class=ananke-socials>
</div>
</div>
</div>
</nav>
<div class="tc-l pv3 ph3 ph4-ns">
<h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">
Posts
</h1>
</div>
</div>
</header>
<main class=pb7 role=main>
<article class="pa3 pa4-ns nested-copy-line-height">
<section class="cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy mid-gray"></section>
<section class="flex-ns flex-wrap justify-around mt5">
<div class="relative w-100 w-30-l mb4 bg-white">
<div class="relative w-100 mb4 bg-white nested-copy-line-height">
<div class="bg-white mb3 pa4 gray overflow-hidden">
<span class="f6 db">Posts</span>
<h1 class="f3 near-black">
<a href=/posts/http-a-history/ class="link black dim">
Http - A History
</a>
</h1>
<div class="nested-links f5 lh-copy nested-copy-line-height">
A few notes based on this great video
HTTP/1 TCP/IP The first and most simple approach, making a TCP handshake for each resource which has to be shared.
The downsides to this approach is that in order to speed up transfer rates, we want to send many resource pieces in parallel. With HTTP/1, this means doing a new TCP handshake every-time, which is costly and time consuming. This was alleviated in a later version HTTP/1.
</div>
</div>
</div>
</div>
<div class="relative w-100 w-30-l mb4 bg-white">
<div class="relative w-100 mb4 bg-white nested-copy-line-height">
<div class="bg-white mb3 pa4 gray overflow-hidden">
<span class="f6 db">Posts</span>
<h1 class="f3 near-black">
<a href=/posts/regex-processor-1-intro/ class="link black dim">
Regex Processor 1 Intro
</a>
</h1>
<div class="nested-links f5 lh-copy nested-copy-line-height">
So, one of the things I&rsquo;ve wanted to play around with is search and regex. Searching through text for matches to a regular expression can be efficiently implemented using finite state machines.
Finite State Machines finite state machines are both simple and useful. The simplest definition I can think of is something like this;
A finite State Machine (FSM) is a series of states. The machine start in some state, then decides the next state to go to based on some input.
</div>
</div>
</div>
</div>
<div class="relative w-100 w-30-l mb4 bg-white">
<div class="relative w-100 mb4 bg-white nested-copy-line-height">
<div class="bg-white mb3 pa4 gray overflow-hidden">
<span class="f6 db">Posts</span>
<h1 class="f3 near-black">
<a href=/posts/regex-processor-2-getting-into-some-code/ class="link black dim">
Regex Processor 2 Getting into some code
</a>
</h1>
<div class="nested-links f5 lh-copy nested-copy-line-height">
Let&rsquo;s start coding.
The FSM data structure We can first think about our core data structures to represent the FSM. The FSM is essentially a linked list of state objects.
type State struct { connectedStates []State } We need a bit more information, however, as we need to know which character allows us to go from one state to another. We&rsquo;ll use a Transition struct to represent this.
The Transition struct contains two things:
</div>
</div>
</div>
</div>
<div class="relative w-100 w-30-l mb4 bg-white">
<div class="relative w-100 mb4 bg-white nested-copy-line-height">
<div class="bg-white mb3 pa4 gray overflow-hidden">
<span class="f6 db">Posts</span>
<h1 class="f3 near-black">
<a href=/posts/regex-processor-3-starting-the-compiler/ class="link black dim">
Regex Processor 3 Starting the compiler
</a>
</h1>
<div class="nested-links f5 lh-copy nested-copy-line-height">
Now we have a working FSM and way to process strings, let&rsquo;s take a look at building FSMs automatically from regular expressions using a compiler.
Compiling a Finite State Machine We can break down the previous example of writing an FSM for the regular expression abc into at least 2 discrete steps;
Take the string abc and create a linked list of 'states' with conditional transitions to other states. Process the input by moving through the states.
</div>
</div>
</div>
</div>
<div class="relative w-100 w-30-l mb4 bg-white">
<div class="relative w-100 mb4 bg-white nested-copy-line-height">
<div class="bg-white mb3 pa4 gray overflow-hidden">
<span class="f6 db">Posts</span>
<h1 class="f3 near-black">
<a href=/posts/regex-processor-4-testing-fuzzing-and-fixing-things/ class="link black dim">
Regex Processor 4 Testing, Fuzzing, and fixing things
</a>
</h1>
<div class="nested-links f5 lh-copy nested-copy-line-height">
We can spend some time here doing some interesting things to our tests, which should make our lives a bit easier down the road.
Testing against the Go regex package As Go includes its own regex package, we can use this to validate our own implementation. Let&rsquo;s add a test which compares the results from our own FSM and the Go regex library.
func TestFSMAgainstGoRegexPkg(t *testing.T) { type test struct { name string regex string input string } tests := []test{ {"empty string", "abc", ""}, {"non matching string", "abc", "xxx"}, {"matching string", "abc", "abc"}, {"partial matching string", "abc", "ab"}, } for _, tt := range tests { t.
</div>
</div>
</div>
</div>
<div class="relative w-100 w-30-l mb4 bg-white">
<div class="relative w-100 mb4 bg-white nested-copy-line-height">
<div class="bg-white mb3 pa4 gray overflow-hidden">
<span class="f6 db">Posts</span>
<h1 class="f3 near-black">
<a href=/posts/regex-processor-5-wildcards/ class="link black dim">
Regex Processor 5 Wildcards
</a>
</h1>
<div class="nested-links f5 lh-copy nested-copy-line-height">
Let&rsquo;s start adding some special regex characters, starting with the '.' wildcard regular expression.
Wildcards The . character in a regular expression will match any character. To make this clear, here are a few example cases for the regular expression ab.;
abc -> success ab -> normal
So, let&rsquo;s add these as test cases in our code.
{"nested expressions", "a(b(d))c", "abdc"}, {"substring match with reset needed", "aA", "aaA"}, {"substring match without reset needed", "B", "ABA"}, {"multibyte characters", "Ȥ", "Ȥ"}, { "complex multibyte characters", string([]byte{0xef, 0xbf, 0xbd, 0x30}), string([]byte{0xcc, 0x87, 0x30}), }, + // wildcard + {"wildcard regex matching", "ab.
</div>
</div>
</div>
</div>
<div class="relative w-100 w-30-l mb4 bg-white">
<div class="relative w-100 mb4 bg-white nested-copy-line-height">
<div class="bg-white mb3 pa4 gray overflow-hidden">
<span class="f6 db">Posts</span>
<h1 class="f3 near-black">
<a href=/posts/the-journey-of-a-refactor/ class="link black dim">
The Journey of a Refactor
</a>
</h1>
<div class="nested-links f5 lh-copy nested-copy-line-height">
Basically, I was trying to do something and went down the wrong path, and when I finally saw the light it all got a lot better.
Problem I’m trying to write a test that makes sure that no other fields in the db are effected when we write to the db - only the field that we care about. The issue is that when you decode a response from the db to a go struct, you can use known fields with a struct, or unknown fields with a map, but you can’t do a mix.
</div>
</div>
</div>
</div>
</section></article>
</main>
<footer class="bg-black bottom-0 w-100 pa3" role=contentinfo>
<div class="flex justify-between">
<a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://LeweyM.github.io>
&copy; Lewis Metcalf 2022
</a>
<div>
<div class=ananke-socials>
</div></div>
</div>
</footer>
</body>
</html>